<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="description" content="Výukový materiál pro programovací jazyk C&#43;&#43; zaměřený na témata, která jsou běžně opomíjená, ale přitom pro pochopení C&#43;&#43; a jeho efektivního použití důležitá.">
<meta name="author" content="Daniel Langr">
<meta name="copyright" content="(C) Daniel Langr 2020">
<link rel="icon" type="image/png" href="./favicon/favicon.png">
<title>Trochu jiný C&#43;&#43; tutoriál</title>
<link rel="stylesheet" href="./../stylesheets/ubuntu-custom.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-180949618-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-180949618-1');
</script>
</head>
<body class="article">
<div id="header">
<h1>Trochu jiný C&#43;&#43; tutoriál</h1>
<div class="details">
<span id="author" class="author">Daniel Langr</span><br>
<span id="email" class="email"><a href="mailto:daniel.langr@gmail.com">daniel.langr@gmail.com</a></span><br>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_nejnovější_příspěvky">Nejnovější příspěvky</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="posts/04_nedefinovane_chovani_II.html">04: Nedefinované chování II.</a> <em>(říjen 2020)</em><br>
<a href="posts/03_nedefinovane_chovani_I.html">03: Nedefinované chování I.</a> <em>(říjen 2020)</em><br>
<a href="posts/02_implementace.html">02: Implementace C&#43;&#43;</a> <em>(říjen 2020)</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_úvod">Úvod</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cílem těchto stránek je poskytnout <strong>trochu jiný výukový materiál pro programování v C&#43;&#43;</strong>. Rád bych se zaměřil na <strong>témata, která se úplně běžně neprobírají</strong> a přesto jsou podle mého názoru <strong>pro pochopení C&#43;&#43; naprosto klíčová</strong>.</p>
</div>
<div class="paragraph">
<p>Důvodem programování v C&#43;&#43; je především požadavek na <strong>vysoký výkon a efektivitu programů</strong>. Tím je myšleno, že programy běží co nejrychleji a spotřebovávají minimální množství systémových prostředků, jako je čas procesoru či množství alokované paměti. Pro dosažení tohoto cíle ale často nestačí znát C&#43;&#43; jen na úrovni <strong>zdrojového kódu</strong>. Občas je potřeba se i podívat, co se děje „uvnitř“ na úrovni <strong>strojového kódu</strong>, který je zdrojového kódu vygeneruje překladač.</p>
</div>
<div class="paragraph">
<p>Jednoduchý příklad&#8201;&#8212;&#8201;v každé učebnici C&#43;&#43; pro začátečníky se dočteme, jak ve funcki vytvořit <strong>lokální proměnnou</strong> (přesněji řečeno proměnnou s automatickou životností). Běžná představa je, že takováto proměnná bude při behu programu uložena <strong>na zásobníku</strong>. Je to ale pravda? Může místo toho být proměnná uložena v <strong>registru procesoru</strong>? Musí tato proměnná za běhu programu <strong>vůbec existovat</strong>? Jaké faktory o tom rozhodují? A co když je to proměnná <strong>třídního typu</strong>? Co vůbec znamená vytvoření proměnné třídního typu pomocí <strong>konstruktoru</strong>? Zdánlivě triviální problematika na úrovni zdrojového kódu v sobě skrývá poměrně rozsáhlou a složitou problematiku na úrovni strojového kódu, který procesor vykonává v době běhu programu.</p>
</div>
<div class="paragraph">
<p>Zde jsou příklady dalších témat, která nejsou zcela běžně prezentována v souvislosti s výukou C&#43;&#43;, a přesto může být podstatné jim rozumět:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Co je to <strong>implementace C&#43;&#43;</strong>? Jak se od sebe jednotlivé implementace liší?</p>
</li>
<li>
<p>Co je to <strong>nedefinované chování</strong>? Pokud má program nedefinované chování podle Standardu C&#43;&#43;, má nedefinované chování i vygenerovaný strojový kód?</p>
</li>
<li>
<p>Jaký je rozdíl mezi velikostí objektu z hlediska <strong>obsahu</strong> a velikostí jeho <strong>bitové reprezentace</strong>?</p>
</li>
<li>
<p>Proč existuje <strong><em>padding</em></strong> a jak souvisí se <strong>zarovnáním</strong> bitové reprezetnace objektů v paměti?</p>
</li>
<li>
<p>Proč nelze oddělit <strong>API</strong> (rozhraní) třídy od všech jejích <strong>implementačních detailů</strong>?</p>
</li>
<li>
<p>Jak je v praxi zajištěno <strong>předávání argumentů a návratových hodnot</strong> do/z funkcí?</p>
</li>
<li>
<p>Co je to <strong>ABI</strong> a jak zajistit <strong>kompatabilitu</strong> na této úrovni?</p>
</li>
<li>
<p>Co jsou to <strong>jednotky překladu</strong>? Jak souvisí s problematikou <strong>„spojování“ (<em>linkage</em>)</strong>?</p>
</li>
<li>
<p>Proč specifikátor <code>inline</code> <strong>nesouvisí</strong> s optimalizací zvanou <em>inlining</em>?</p>
</li>
<li>
<p>Proč nelze z vygenrovaného strojového kódu programu <strong>zpětně zjistit jeho zdrojový kód</strong>?</p>
</li>
<li>
<p>Proč v paměti nelze <strong>přesunout objekt</strong> z jednoho místa na druhé?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Účelem tohoto tutoriálu je <strong>takováto témata rozebírat a vysvětlovat</strong>. Vycházím zde především z dlouhobé zkušenosti s aktivním působením na <a href="https://stackoverflow.com/">Stack Overflow</a> ohledně dotazů týkajících se C&#43;&#43; a také s výukou programování v C&#43;&#43; na Fakultě informačních technologií ČVUT. V neposlední řadě používám C&#43;&#43; i v praxi&#8201;&#8212;&#8201;konkrétně se podílím na vývoji programů určených pro největší světové superpočítače, jejichž procesorový čas je nesmírně drahý a vzácný. Výkon a efektivita zde hrají primární roli, protože při běhu programu na několika stech tisících procesorových jádrech se i zdánlivě zanedbatelný zdroj neefiktivity může projevit jako úzké hrdlo běhu programu.</p>
</div>
<div class="paragraph">
<p>Rohodně se ale nepovažuji za „všeználka“. Současný draft stadnardu C&#43;&#43; (N4868) má <strong>1849 stránek</strong> a asi na světě neexistuje jedinec, který by o C&#43;&#43; věděl vše. Může se tedy stát, že prezentovaný text bude na některých místech nepřesný nebo i mylný. Velmi proto uvítám <strong>zpětnou vazbu</strong> v podobě <strong>komentářů</strong> dostupných na konci každé stránky, především těch konstruktivních. V mnoha případech bude výklad rovněž více či méně <strong>zjednodušený</strong>, především z důvodu čitelnost a stručnosti. Rozebírat každý problém až na úroveň pravidel standardu C&#43;&#43; by totiž bylo neúměrně obsáhlé a nezábavné.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pro_koho_je_tutoriál_určen">Pro koho je tutoriál určen?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tento tutoriál <strong>sám o sobě</strong> není určen pro úplné začátečníky. Nemá smyls zde řešit základy C&#43;&#43;&#8201;&#8212;&#8201;těch jsou plné knihovny i internet. Přesto tento tutoriál není určený jen pro programátory, kteří si základy C&#43;&#43; již dobře osvojili. Stejně dobře může posloužit jako <strong>doplňkový výukový materiál pro začátečníky</strong>, kteří se základy C&#43;&#43; teprve učí. V takovém případě nabídne na získávané znalosti odlišnou a doufám i <strong>atraktivní a užitečnou perspektivu</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_obsah">Obsah</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="posts/01_asif.html">01: <em>As-if</em> pravidlo</a> <em>(říjen 2020)</em><br>
<a href="posts/02_implementace.html">02: Implementace C&#43;&#43;</a> <em>(říjen 2020)</em><br>
<a href="posts/03_nedefinovane_chovani_I.html">03: Nedefinované chování I.</a> <em>(říjen 2020)</em><br>
<a href="posts/04_nedefinovane_chovani_II.html">04: Nedefinované chování II.</a> <em>(říjen 2020)</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_o_autorovi">O autorovi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Působím jako akademický pracovník na Fakultě informačních technologií ČVUT, kde se věnuji převážně vědecko-výzkumné práci a výuce studentů magisterského bloku. C&#43;&#43; provází můj život tedy již více než 25 let. Z počátku to bylo díky implementaci Borland C&#43;&#43;, která existovala ještě před první standradizací C&#43;&#43;98. Za těch 25 let se C&#43;&#43; stalo mou prací i mým koníčkem. V aplikační rovině ho používám především pro vývoj paralelních programů určených pro velké superpočítače. Spolupracuji například s teoretickými jadernými fyziky na řešení Schrödingerovy rovnice pro atomová jádra pomocí <em>ab-inito no-core shell</em> modelu.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_komentáře">Komentáře</h2>
<div class="sectionbody">
<div id="disqus_thread"></div>
<script>
var disqus_config = function () {
this.page.url = window.location.href;
this.page.identifier = window.location.pathname;
this.language = "cs";
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://yact.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<div class="sidebarblock">
<div class="content">
<div class="paragraph text-center">
<p>&#169; 2020 Daniel Langr&#8201;&#8212;&#8201;všechna práva vyhrazena.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/agate.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>